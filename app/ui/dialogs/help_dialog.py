"""
도움말 다이얼로그 모듈

이 모듈은 애플리케이션의 사용자 가이드를 제공하는 다이얼로그를 정의합니다.
좌측의 토픽 목록과 우측의 상세 내용을 보여주는 구조로 되어 있습니다.

클래스:
    HelpDialog: 사용자 가이드 다이얼로그
"""

from PyQt6.QtWidgets import (
    QDialog, QHBoxLayout, QListWidget, QTextBrowser, QFrame
)

class HelpDialog(QDialog):
    """
    사용자 가이드를 표시하는 다이얼로그 클래스입니다.

    QListWidget을 사용하여 도움말 목차를 표시하고,
    QTextBrowser를 사용하여 선택된 목차의 상세 내용을 HTML 형식으로 표시합니다.
    """

    def __init__(self, parent=None):
        """
        HelpDialog를 초기화합니다.

        UI 레이아웃을 구성하고 도움말 데이터를 로드합니다.

        매개변수:
            parent: 부모 위젯 (기본값: None)
        """
        super().__init__(parent)
        self.setWindowTitle("User Guide")
        self.resize(1120, 840)
        
        layout = QHBoxLayout(self)
        self.list = QListWidget()         # 토픽 목록 위젯
        self.list.setFixedWidth(200)
        self.content = QTextBrowser()     # 내용 표시 위젯
        self.content.setReadOnly(True)
        
        line = QFrame()                   # 구분선
        line.setFrameShape(QFrame.Shape.VLine)
        line.setFrameShadow(QFrame.Shadow.Sunken)
        
        layout.addWidget(self.list)
        layout.addWidget(line)
        layout.addWidget(self.content)
        
        # 도움말 데이터 (토픽 제목: HTML 내용)
        self.topics = {
            "Introduction": """
                <h2>Maritime Signal Synthesizer</h2>
                
                <h3>주요 기능</h3>
                <ul>
                    <li><b>데이터 생성:</b> Great Circle 항법을 기반으로 선박의 위치를 계산하고, 실제 AIS 및 레이더 신호와 매우 유사한 NMEA 메시지를 생성합니다.</li>
                    <li><b>시나리오 기반 시뮬레이션:</b> 시간, 선박의 위치, 근접 거리 등 다양한 조건을 조합하여 복잡한 이벤트를 만들고, 이를 시나리오로 구성하여 동적인 시뮬레이션이 가능합니다.</li>
                    <li><b>실시간 유저 프로그램 간 상호작용:</b> 시뮬레이션이 실행되는 동안에도 선박의 속도나 침로를 수동으로 변경하거나, 특정 신호의 송출을 제어할 수 있습니다.</li>
                    <li><b>프로젝트 기반 관리:</b> 모든 시뮬레이션 데이터(지도, 선박, 경로, 이벤트, 시나리오 등)는 하나의 프로젝트 폴더에 체계적으로 저장되어 관리 및 재사용이 용이합니다.</li>
                </ul>

                <h3>워크플로우</h3>
                <p>이 프로그램을 사용하는 일반적인 작업 순서는 다음과 같습니다.</p>
                <ol>
                    <li><b>Create a Project:</b> 시뮬레이션에 필요한 모든 데이터를 담을 중앙 작업 공간(프로젝트)을 만듭니다.</li>
                    <li><b>Define Paths:</b> 지도 위에 선박을 추가하고, 각 선박이 항해할 경로(경유점, Waypoint)를 설정합니다.</li>
                    <li><b>Create Events:</b> "특정 시간에 A 선박의 속도를 10노트로 변경"과 같이, 시뮬레이션에서 발생할 수 있는 모든 논리적 규칙(이벤트)의 마스터 목록을 정의합니다.</li>
                    <li><b>Build Scenarios:</b> 생성된 이벤트들을 조합하고, 이벤트 간의 발생 순서나 종속성을 설정하여 재사용 가능한 시나리오를 구성합니다.</li>
                    <li><b>Run Simulation:</b> 구성된 시나리오를 바탕으로 시뮬레이션을 실행하여, 실시간으로 생성되는 신호 데이터를 외부 장치로 송출합니다.</li>
                </ol>
            """,
            "Core Concepts": """
                <h2>Simulation Components</h2>
                
                <dl>
                    <dt><b>Project</b></dt>
                    <dd>
                        <p>사용자의 모든 작업 내용을 담는 가장 큰 단위의 컨테이너입니다. '새 프로젝트'를 생성하면 지정된 위치에 프로젝트 이름으로 된 폴더가 만들어지며, 그 안에는 다음과 같은 하위 폴더와 파일이 생성되어 데이터를 체계적으로 관리합니다:</p>
                        <ul>
                            <li><code>project.json</code>: 프로젝트의 기본 설정(시작 시간, 지도 중심 등)과 선박, 구역 목록이 저장되는 핵심 파일입니다.</li>
                            <li><code>/Objects/</code>: 각 선박의 상세 정보(MMSI, 이름)와 경로(경유점 목록)가 개별 <code>.json</code> 파일로 저장되는 폴더입니다.</li>
                            <li><code>/Events/</code>: 생성된 모든 이벤트의 마스터 목록이 개별 <code>.json</code> 파일로 저장되는 폴더입니다.</li>
                            <li><code>/Scenarios/</code>: 생성된 시나리오들이 개별 <code>.json</code> 파일로 저장되는 폴더입니다.</li>
                        </ul>
                        <p>이러한 폴더 기반 구조 덕분에 프로젝트 전체를 쉽게 복사하거나 다른 사용자와 공유할 수 있습니다.</p>
                    </dd>

                    <dt><b>Ship</b></dt>
                    <dd>
                        <p>시뮬레이션의 주 대상으로, 항해하는 개별 선박을 나타내는 객체입니다. 각 선박은 다음과 같은 주요 속성을 가집니다:</p>
                        <ul>
                            <li><b>고유 식별자:</b> MMSI, 선박 이름(Name)</li>
                            <li><b>경로 (Path):</b> 선박이 따라 항해할 경유점(Waypoint)들의 목록입니다. 각 경유점에는 목표 속도(Speed)가 지정됩니다.</li>
                            <li><b>상태 (State):</b> 시뮬레이션 중 실시간으로 변하는 값들, 즉 현재 위치(위/경도), 속도(Speed), 침로(Heading) 등을 포함합니다.</li>
                        </ul>
                    </dd>

                    <dt><b>Area</b></dt>
                    <dd><p>사용자가 지도 위에 직접 그리는 다각형 모양의 영역입니다. 주로 특정 이벤트의 발생 조건으로 사용됩니다. 예를 들어, '특정 선박이 위험 구역에 진입했을 때'와 같은 이벤트를 만드는 데 활용할 수 있습니다. 각 구역은 고유한 이름을 가지며, 선박과 마찬가지로 프로젝트의 일부로 저장됩니다.</p></dd>

                    <dt><b>Event</b></dt>
                    <dd>
                        <p>시뮬레이션의 동적인 요소를 구현하는 가장 기본적인 논리 단위입니다. 이벤트는 <b>"언제(When), 무엇을(Do)"</b> 이라는 간단한 규칙으로 정의됩니다. 즉, 특정 <b>트리거(Trigger)</b> 조건이 만족되었을 때, 지정된 <b>액션(Action)</b>이 실행되는 구조입니다.</p>
                        <ul>
                            <li><b>트리거 (Trigger):</b> 액션을 실행시킬 조건입니다. (예: "시뮬레이션 시작 후 300초가 지났을 때", "A 선박이 '금지구역'에 진입했을 때")</li>
                            <li><b>액션 (Action):</b> 트리거가 발생했을 때 수행될 동작입니다. (예: "A 선박의 속도를 5노트로 변경하라", "B 선박을 즉시 정지시켜라")</li>
                        </ul>
                        <p>'이벤트 편집기' 탭에서 생성된 이벤트들은 프로젝트의 '마스터 이벤트 목록'에 추가되며, 시나리오를 구성하는 재료로 사용됩니다.</p>
                    </dd>
                    
                    <dt><b>Scenario</b></dt>
                    <dd>
                        <p>이 프로그램의 가장 강력한 기능 중 하나로, 복잡한 상황을 모델링하기 위해 사용됩니다. 시나리오는 프로젝트의 마스터 이벤트 목록에서 가져온 이벤트들의 <b>'복사본'</b>을 담고 있는 휴대 가능한 컨테이너입니다.</p>
                        <p>시나리오의 핵심은 이벤트 간의 <b>종속성(Dependency)</b>을 설정할 수 있다는 점입니다. 예를 들어, "B 이벤트는 A 이벤트가 완료된 후에만 발생할 수 있다" 와 같은 순차적인 규칙을 만들 수 있습니다. 이를 통해 다음과 같은 복잡한 상황을 쉽게 구현할 수 있습니다:</p>
                        <p><i>"A 선박이 특정 구역에 진입하면(이벤트 1), 속도를 줄이고(이벤트 2), 5분 대기 후(이벤트 3), 원래 경로로 복귀한다(이벤트 4)."</i></p>
                        <p>이러한 일련의 행동들을 하나의 시나리오로 묶어두면, 필요할 때마다 해당 시나리오를 활성화하여 동일한 상황을 반복적으로 시뮬레이션할 수 있습니다.</p>
                    </dd>
                </dl>
            """,
            "Getting Started": """
                
                <h3>1. 새 프로젝트 생성</h3>
                <ol>
                    <li>상단 메뉴에서 <code>파일(File) > 새 프로젝트(New Project)</code>를 선택합니다.</li>
                    <li>'새 프로젝트 생성' 대화상자가 나타나면 다음 정보를 입력합니다:
                        <ul>
                            <li><b>프로젝트 이름 (Project Name):</b> 'MyFirstSimulation'과 같이 프로젝트를 식별할 수 있는 이름을 입력합니다.</li>
                            <li><b>프로젝트 경로 (Project Path):</b> '찾아보기' 버튼을 눌러 프로젝트 폴더가 생성될 위치를 지정합니다. 예를 들어 '내 문서' 폴더를 선택하면, '내 문서/MyFirstSimulation' 폴더가 생성됩니다.</li>
                        </ul>
                    </li>
                    <li>'생성' 버튼을 누르면 지정된 경로에 프로젝트 폴더와 초기 파일들이 자동으로 생성되고, 프로그램의 작업 공간이 해당 프로젝트로 설정됩니다. 창 제목 표시줄에 현재 열린 프로젝트의 경로가 표시됩니다.</li>
                </ol>

                <h3>2. 프로젝트 열기</h3>
                <p>이전에 작업했던 시뮬레이션을 계속 진행하려면, 상단 메뉴에서 <code>파일(File) > 프로젝트 열기(Open Project)</code>를 선택합니다. 파일 탐색기가 나타나면, 작업하려는 프로젝트 폴더로 이동하여 그 안에 있는 <code>project.json</code> 파일을 선택하고 '열기' 버튼을 누릅니다.</p>

                <h3>3. 작업 저장</h3>
                <p>작업하는 동안 수시로 저장하는 것이 중요합니다. <code>파일(File) > 프로젝트 저장(Save Project)</code> 메뉴를 선택하거나, 단축키 <code>Ctrl+S</code>를 누르면 현재 프로젝트의 모든 변경사항(추가된 선박, 수정된 경로, 생성된 이벤트 등)이 각 파일에 저장됩니다. 프로그램을 종료할 때 저장되지 않은 변경사항이 있으면 저장 여부를 묻는 메시지가 나타납니다.</p>
            """,
            "Path": """
                
                <p>메인 윈도우의 '경로(Path)' 탭은 시뮬레이션의 물리적인 환경을 설정하는 곳입니다. 이곳에서 지도와 상호작용하며 선박과 구역을 배치하고, 선박의 이동 경로를 계획합니다.</p>
                
                <h3>지도 조작 방법</h3>
                <ul>
                    <li><b>이동 (Pan):</b> 마우스 휠(가운데 버튼)을 누른 상태로 드래그하거나, 키보드의 방향키를 사용하여 지도를 상하좌우로 부드럽게 이동할 수 있습니다.</li>
                    <li><b>확대/축소 (Zoom):</b> 마우스 휠을 위아래로 굴려 지도를 확대하거나 축소합니다. 확대/축소는 현재 마우스 커서 위치를 중심으로 이루어집니다.</li>
                    <li><b>좌표 확인:</b> 상태 표시줄(화면 좌측 하단)에는 현재 마우스 커서가 위치한 지점의 위도(Lat)와 경도(Lon)가 실시간으로 표시되어 정밀한 위치 확인에 도움이 됩니다.</li>
                </ul>
                
                <h3>객체 관리 (우측 패널)</h3>
                <p>우측 패널은 프로젝트에 포함된 모든 선박과 구역을 관리하는 컨트롤 타워입니다.</p>
                <ul>
                    <li><b>선박 추가 (Add Ship):</b> 이 버튼을 누르면 '새 선박 추가' 대화상자가 나타납니다. 선박의 이름과 MMSI를 입력하고 '추가' 버튼을 누르면 새로운 선박이 지도 중심에 생성됩니다.</li>
                    <li><b>구역 추가 (Add Area):</b> 지도 상에 다각형 영역을 그릴 때 사용합니다. 버튼을 누른 후, 지도 위를 클릭하여 다각형의 꼭지점을 하나씩 추가하고, 마지막으로 마우스를 더블 클릭하면 구역 생성이 완료됩니다. 구역의 이름은 생성 후 속성 창에서 변경할 수 있습니다.</li>
                    <li><b>객체 목록:</b> 드롭다운 메뉴와 목록에는 프로젝트에 속한 모든 선박과 구역이 표시됩니다. 목록에서 특정 객체를 선택하면 지도 상에서 해당 객체가 강조 표시되며, 패널 하단에 선택된 객체의 속성과 경로 정보를 편집할 수 있는 컨트롤들이 나타납니다.</li>
                </ul>
                
                <h3>선박 경로 계획 (선박 선택 시)</h3>
                <p>객체 목록에서 특정 선박을 선택하면, 해당 선박의 경로를 계획할 수 있습니다.</p>
                <ul>
                    <li><b>경유점 추가 (Add Waypoint):</b> 선박이 선택된 상태에서 지도 위를 클릭하면 해당 위치에 경유점이 추가됩니다. 경유점은 선박이 거쳐갈 지점이며, 추가된 경유점은 선으로 연결되어 경로를 형성합니다.</li>
                    <li><b>경유점 속성 편집:</b> 우측 패널의 경유점 목록에서 각 경유점을 선택하고, 하단의 '목표 속도(Target Speed)' 입력란에 해당 경유점까지 항해할 속도를 노트(knots) 단위로 입력할 수 있습니다.</li>
                    <li><b>경유점 이동:</b> 지도 위의 경유점을 마우스로 클릭하여 드래그하면 위치를 자유롭게 변경할 수 있습니다. 경로가 실시간으로 업데이트됩니다.</li>
                    <li><b>경유점 삭제:</b> 우측 패널의 경유점 목록에서 삭제하고 싶은 경유점을 선택한 후, 키보드의 'Delete' 키를 누르거나, 지도 위의 경유점을 우클릭하여 나타나는 메뉴에서 '삭제'를 선택할 수 있습니다.</li>
                    <li><b>고급 기능 (우클릭 메뉴):</b> 지도 위의 경유점이나 경로 선을 우클릭하면 '중간에 경유점 삽입', '경로 전체 삭제' 등 다양한 편의 기능을 사용할 수 있습니다.</li>
                </ul>
            """,
            "Event": """
            
                <p>'이벤트(Event)' 탭은 시뮬레이션에서 발생할 수 있는 다양한 상황과 그에 따른 선박의 행동을 정의하는 곳입니다. 이곳에서 생성된 이벤트들은 프로젝트의 마스터 이벤트 목록에 저장되며, 시나리오를 구성하는 기본 단위로 사용됩니다.</p>

                <h3>이벤트의 구조: 트리거와 액션</h3>
                <p>모든 이벤트는 <b>"어떤 조건(Trigger)이 충족되면, 어떤 행동(Action)을 하라"</b>는 구조로 이루어져 있습니다. '이벤트 추가' 버튼을 눌러 이벤트 편집기 대화상자를 열고 다음 항목들을 설정합니다.</p>
                
                <h4>1. Trigger - "언제?"</h4>
                <p>액션을 실행시킬 조건을 선택하고 상세 파라미터를 설정합니다.</p>
                <ul>
                    <li><b>TIME:</b> 시뮬레이션이 시작된 후 지정된 시간이 경과했을 때 트리거됩니다.
                        <ul><li><i>예시: '시간' 필드에 '300'을 입력하면, 시뮬레이션 시작 후 5분 뒤에 트리거됩니다.</i></li></ul>
                    </li>
                    <li><b>AREA_ENTER:</b> 특정 선박이 지정된 구역(Area)에 진입했을 때 트리거됩니다.
                        <ul><li><i>예시: '대상 선박'으로 'Ship A'를, '대상 구역'으로 'Restricted Zone'을 선택하면, Ship A가 Restricted Zone에 들어가는 순간 트리거됩니다.</i></li></ul>
                    </li>
                    <li><b>AREA_LEAVE:</b> 특정 선박이 지정된 구역에서 빠져나올 때 트리거됩니다.</li>
                    <li><b>PROXIMITY:</b> 기준 선박과 대상 선박 사이의 거리가 특정 조건에 해당될 때 트리거됩니다.
                        <ul>
                            <li><b>CPA (Closest Point of Approach):</b> 두 선박이 가장 가까워지는 거리. 'CPA가 ~이하일 때' 조건을 사용하면 충돌 위험 상황을 감지할 수 있습니다.</li>
                            <li><i>예시: 기준 선박 'Own Ship'과 대상 선박 'Target Ship'의 근접 트리거를 '거리가 1.0 NM 이하일 때'로 설정하면, 두 선박의 거리가 1해리 안으로 좁혀지는 순간 트리거됩니다.</i></li>
                        </ul>
                    </li>
                </ul>

                <h4>2. Action - "무엇을?"</h4>
                <p>트리거가 발생했을 때 수행될 동작을 선택하고 상세 파라미터를 설정합니다.</p>
                <ul>
                    <li><b>STOP:</b> 대상 선박을 즉시 정지시킵니다. 선박은 현재 위치에서 속도가 0이 됩니다.</li>
                    <li><b>CHANGE_SPEED:</b> 대상 선박의 속도를 지정된 값(knots)으로 변경합니다.</li>
                    <li><b>CHANGE_HEADING:</b> 대상 선박의 침로를 지정된 각도(degrees)로 즉시 변경합니다. 선박은 원래의 경로를 이탈하여 새로운 침로로 항해하기 시작합니다.</li>
                    <li><b>VECTOR:</b> CHANGE_HEADING과 유사하지만, 선박이 경로를 완전히 무시하고 지정된 속도와 침로로 계속 직진하도록 만듭니다. '자유 기동' 상태로 전환하는 것과 같습니다.</li>
                    <li><b>RESUME_PATH:</b> VECTOR 또는 CHANGE_HEADING 액션으로 인해 경로를 이탈한 선박이 원래 계획된 자신의 경로로 복귀하도록 합니다. 프로그램은 가장 효율적인 복귀 항로를 계산하여 선박을 유도합니다.</li>
                </ul>
                <p>이렇게 생성된 이벤트는 '프로젝트 이벤트 목록'에 추가되어 언제든지 시나리오를 구성하는 데 사용될 수 있습니다.</p>
            """,

            "Scenario": """
                
                <p>'시나리오(Scenario)' 탭은 여러 이벤트를 조합하여 복잡한 상황을 모델링하는 도구입니다. 시나리오는 프로젝트의 이벤트 목록에서 가져온 이벤트들을 담고 있으며, 각 이벤트 간의 발생 순서와 종속성을 설정할 수 있습니다.</p>
                <h4>이벤트 vs. 시나리오: 차이점</h4>
                <p><b>'이벤트 편집기'</b>가 "어떤 일이 일어날 수 있는가?" (가능성의 목록)를 정의하는 곳이라면, <b>'시나리오 편집기'</b>는 "어떤 일이, 어떤 순서로 일어날 것인가?" (실행 계획)를 구체적으로 설계하는 곳입니다. 시나리오는 일종의 '이벤트 패키지'입니다.</p>
                
                <h3>시나리오 구성 워크플로우</h3>
                <ol>
                    <li><b>새 시나리오 생성:</b> '새 시나리오' 버튼을 클릭하여 시나리오 파일을 만듭니다. 'Collision_Avoidance_Test'와 같이 시나리오의 목적을 잘 나타내는 이름을 지정하는 것이 좋습니다.</li>
                    
                    <li><b>시나리오에 이벤트 추가:</b>
                        <p>화면 좌측의 '프로젝트 이벤트 목록'(마스터 목록)에서 원하는 이벤트를 마우스로 끌어(Drag) 우측의 '시나리오 이벤트 목록'으로 놓습니다(Drop). 이 작업은 원본 이벤트를 '복사'하여 시나리오에 포함시키는 것입니다. 따라서 시나리오 내에서 이벤트를 수정해도 원본 이벤트에는 영향을 주지 않습니다.</p>
                    </li>
                    
                    <li><b>종속성(Prerequisite) 설정 - 시나리오의 핵심:</b>
                        <p>이것이 시나리오를 강력하게 만드는 핵심 기능입니다. 특정 이벤트가 다른 이벤트보다 먼저 발생해야 하는 순서를 지정할 수 있습니다.</p>
                        <p><b>예시: 선박 회피 기동 시나리오</b></p>
                        <ol style="list-style-type: lower-alpha;">
                            <li>먼저, 다음과 같은 이벤트들을 '이벤트 편집기'에서 미리 만들어 둡니다:
                                <ul>
                                    <li><b>(A) 근접 경보:</b> 두 선박의 거리가 2NM 이하가 되면 트리거</li>
                                    <li><b>(B) 속도 감소:</b> 경보가 울린 선박의 속도를 5노트로 줄이는 액션</li>
                                    <li><b>(C) 침로 변경:</b> 경보가 울린 선박의 침로를 우현으로 30도 변경하는 액션</li>
                                    <li><b>(D) 경로 복귀:</b> 두 선박의 거리가 다시 3NM 이상으로 멀어지면, 원래 경로로 복귀하는 액션</li>
                                </ul>
                            </li>
                            <li>'시나리오 편집기'에서 (A), (B), (C), (D) 이벤트를 모두 시나리오에 추가합니다.</li>
                            <li>'시나리오 이벤트 목록'에서 <b>(B) 속도 감소</b> 이벤트를 선택한 후, '선행 조건 추가(Add Prerequisite)' 버튼을 누르고 <b>(A) 근접 경보</b>를 선행 조건으로 지정합니다. -> <i>이제 (B)는 (A)가 발생한 후에만 활성화됩니다.</i></li>
                            <li>같은 방식으로 <b>(C) 침로 변경</b> 이벤트의 선행 조건으로 <b>(B) 속도 감소</b>를 지정합니다.</li>
                            <li><b>(D) 경로 복귀</b> 이벤트의 선행 조건으로 <b>(C) 침로 변경</b>을 지정합니다.</li>
                        </ol>
                        <p>이제 A→B→C→D 순서로 작동하는 완벽한 자동 회피 기동 시나리오가 완성되었습니다.</p>
                    </li>

                    <li><b>시나리오 활성화/비활성화:</b>
                        <p>시뮬레이터를 실행하기 전에, 메인 시나리오 목록의 체크박스를 통해 이번 시뮬레이션에 적용할 시나리오들을 선택하거나 해제할 수 있습니다. 이를 통해 다양한 상황을 조합하며 테스트하는 것이 매우 용이해집니다.</p>
                    </li>
                </ol>
            """,
            "Simulator": """
                <h2>시뮬레이션 실행 및 제어</h2>
                <p>'시뮬레이터(Simulator)' 탭은 설계한 시나리오를 실행하고, 그 결과를 실시간으로 확인하며, 외부 장비로 데이터를 전송하는 모듈입니다.</p>

                <h3>시뮬레이션 제어</h3>
                <ul>
                    <li><b>재생 컨트롤 (Start/Pause/Stop):</b>
                        <ul>
                            <li><b>Start:</b> 시뮬레이션을 시작합니다. 이 순간부터 시뮬레이션 시간이 흐르기 시작하고, 설정된 UDP 포트로 NMEA 데이터 송출이 시작됩니다.</li>
                            <li><b>Pause:</b> 시뮬레이션을 일시 정지합니다. 모든 선박이 현재 상태를 유지하며 멈춥니다. 다시 'Start'를 누르면 이어서 진행됩니다.</li>
                            <li><b>Stop:</b> 시뮬레이션을 완전히 중지하고 초기 상태로 리셋합니다.</li>
                        </ul>
                    </li>
                    <li><b>시뮬레이션 배속:</b> 'x1', 'x2', 'x4', 'x8' 버튼을 사용하여 시뮬레이션 시간의 흐름을 가속할 수 있습니다. 장시간 시나리오를 빠르게 검토할 때 유용합니다.</li>
                    <li><b>시뮬레이션 시간:</b> 시뮬레이션이 시작된 후 경과된 시간을 '시/분/초' 형식으로 보여줍니다.</li>
                    <li><b>지도 표시:</b> 시뮬레이션이 실행됨에 따라 지도 위의 선박들이 실시간으로 움직이는 것을 보여줍니다. 이를 통해 시나리오가 의도대로 작동하는지 시각적으로 확인할 수 있습니다.</li>
                </ul>

                <h3>실시간 상호작용 및 모니터링</h3>
                <ul>
                    <li><b>UDP 방송:</b> 'Start' 버튼을 누르면, 시뮬레이션 엔진은 백그라운드에서 모든 선박의 위치와 상태를 초당 여러 번 계산하여 AIVDM, RATTM 형식의 NMEA 메시지를 생성합니다. 이 메시지들은 '설정'에서 지정한 IP 주소와 포트로 실시간 방송(Broadcast)됩니다.
                        <ul><li><b>팁:</b> 데이터가 제대로 수신되는지 확인하려면, Wireshark와 같은 네트워크 패킷 분석 도구를 사용하거나, 수신 장비(ECDIS 등)의 NMEA 모니터링 기능을 활용하십시오.</li></ul>
                    </li>
                    <li><b>수동 제어 (Manual Override):</b> 시뮬레이션이 실행 중일 때, 좌측 목록에서 특정 선박을 선택하면 우측 패널에 해당 선박의 현재 속도와 침로가 표시됩니다. 이 값을 직접 수정하고 '적용' 버튼을 누르면, 해당 선박은 계획된 경로와 이벤트를 무시하고 즉시 새로운 속도와 침로로 항해하기 시작합니다. 예상치 못한 상황을 연출하거나, 수동 개입을 테스트할 때 유용한 기능입니다.</li>
                    <li><b>신호 제어 (Signal Control):</b> 좌측 선박 목록에서 각 선박별로 송출할 신호(AIVDM, RATTM) 종류를 실시간으로 켜거나 끌 수 있습니다. 특정 선박의 AIS 신호가 유실되는 상황 등을 시뮬레이션할 수 있습니다.</li>
                </ul>
            """,
        }
        
        self.list.addItems(self.topics.keys())
        self.list.currentRowChanged.connect(self.show_topic)
        self.list.setCurrentRow(0)

    def show_topic(self, row):
        """
        선택된 토픽의 내용을 화면에 표시합니다.

        QListWidget의 행 변경 시그널에 연결되는 슬롯 함수입니다.

        매개변수:
            row: 선택된 행 인덱스
        """
        if row < 0: return
        key = self.list.item(row).text()
        self.content.setText(f"<h2>{key}</h2><div>{self.topics[key]}</div>")
